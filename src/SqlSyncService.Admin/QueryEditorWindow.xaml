<Window x:Class="SqlSyncService.Admin.QueryEditorWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Query Editor"
        Height="600" Width="800"
        WindowStartupLocation="CenterOwner"
        Background="{StaticResource BackgroundBrush}">
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Form Fields -->
        <StackPanel Grid.Row="0">
            <Label Content="Query Name:"/>
            <TextBox x:Name="QueryNameTextBox" Margin="0,0,0,12"/>

            <Grid Margin="0,0,0,12">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <CheckBox x:Name="PaginableCheckBox" 
                          Content="Enable Pagination" 
                          Grid.Column="0"
                          VerticalAlignment="Center"
                          Checked="PaginableCheckBox_Changed"
                          Unchecked="PaginableCheckBox_Changed"/>

                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <Label Content="Pagination Mode:"/>
                    <ComboBox x:Name="PaginationModeComboBox" 
                              Width="120"
                              SelectionChanged="PaginationModeComboBox_Changed">
                        <ComboBoxItem Content="Offset" IsSelected="True"/>
                        <ComboBoxItem Content="Token"/>
                    </ComboBox>
                </StackPanel>
            </Grid>

            <!-- Offset Pagination Fields -->
            <StackPanel x:Name="OffsetPanel" Visibility="Collapsed" Margin="0,0,0,12">
                <Label Content="Order By Column:"/>
                <TextBox x:Name="OrderByTextBox"/>
                <TextBlock Text="Column to use for ROW_NUMBER() ordering" 
                           Foreground="{StaticResource TextSecondaryBrush}"
                           FontSize="12"
                           Margin="0,4,0,0"/>
            </StackPanel>

            <!-- Token Pagination Fields -->
            <StackPanel x:Name="TokenPanel" Visibility="Collapsed" Margin="0,0,0,12">
                <Label Content="Key Columns (comma-separated):"/>
                <TextBox x:Name="KeyColumnsTextBox"/>
                <TextBlock Text="Columns to use for keyset pagination (e.g., EntryDate, ID)" 
                           Foreground="{StaticResource TextSecondaryBrush}"
                           FontSize="12"
                           Margin="0,4,0,0"/>
            </StackPanel>

            <Label Content="SQL Query:"/>
        </StackPanel>

        <!-- SQL Editor -->
        <Border Grid.Row="1" 
                BorderBrush="#d1d5db" 
                BorderThickness="1" 
                CornerRadius="4"
                Margin="0,0,0,12">
            <TextBox x:Name="SqlTextBox"
                     AcceptsReturn="True"
                     TextWrapping="Wrap"
                     VerticalScrollBarVisibility="Auto"
                     FontFamily="Consolas"
                     FontSize="13"
                     Padding="10"/>
        </Border>

        <!-- Buttons -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right">
            <Button Content="Cancel" 
                    Width="100" 
                    Margin="0,0,8,0"
                    Click="Cancel_Click"/>
            <Button Content="Save" 
                    Width="100"
                    Style="{StaticResource PrimaryButton}"
                    Click="Save_Click"/>
        </StackPanel>
    </Grid>
</Window>
